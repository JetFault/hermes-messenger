!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.HermesMessenger=e()}}(function(){return function e(t,r,s){function n(o,a){if(!r[o]){if(!t[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[o]={exports:{}};t[o][0].call(c.exports,function(e){var r=t[o][1][e];return n(r?r:e)},c,c.exports,e,t,r,s)}return r[o].exports}for(var i="function"==typeof require&&require,o=0;o<s.length;o++)n(s[o]);return n}({1:[function(e,t,r){"use strict";function s(e,t){this.targetFrame=e,this.targetOrigin=t||"*",this.ready=!1,this.callbacks={},this.callbackId=0,window.addEventListener("message",this._receiveMessage)}var n=e("events").EventEmitter,i=e("inherits"),o="HERMES_READY";i(s,n),s.prototype.send=function(e,t){if(this.destroyed)throw new Error("Hermes instance already destroyed");if(!this.targetFrame)throw new Error("Hermes not set up to send data, only receive & respond");var r={data:e};t&&(r._responseId=this._serializeCb(t));var s=this._serializeData(r);this.targetFrame.postMessage(s,this.targetDomain)},s.prototype.announceReady=function(){this.send({type:o})},s.prototype.destroy=function(){this.destroyed=!0,this.removeAllListeners(),window.removeEventListener("message",this._receiveMessage)},s.prototype._receiveMessage=function(e){if("*"===this.targetOrigin||e.origin===this.targetOrigin){var t,r=this;try{t=JSON.parse(e.data)}catch(s){return void console.error("Hermes: Error parsing response",e.data)}if(t.type===o)return this.ready=!0,void this.emit("ready");if(t._callbackId&&this.callbacks[t._callbackId])return void this.callbacks[t._callbackId](t.err,t.success);var n;t._responseId&&(n=function(s,n){e.source.postMessage(r._serializeData({_callbackId:t._responseId,err:s,success:n}),e.origin)}),this.emit("message",t.data,n,e.source,e.origin)}},s.prototype._serializeData=function(e){return JSON.stringify(e)},s.prototype._serializeCb=function(e){var t=this.callbackId;return this.callbacks[this.callbackId++]=e,t},t.exports=s},{events:2,inherits:3}],2:[function(e,t,r){function s(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0,s.defaultMaxListeners=10,s.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},s.prototype.emit=function(e){var t,r,s,i,h,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],a(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,i=new Array(s-1),h=1;s>h;h++)i[h-1]=arguments[h];r.apply(this,i)}else if(o(r)){for(s=arguments.length,i=new Array(s-1),h=1;s>h;h++)i[h-1]=arguments[h];for(u=r.slice(),s=u.length,h=0;s>h;h++)u[h].apply(this,i)}return!0},s.prototype.addListener=function(e,t){var r;if(!n(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var r;r=a(this._maxListeners)?s.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},s.prototype.on=s.prototype.addListener,s.prototype.once=function(e,t){function r(){this.removeListener(e,r),s||(s=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var s=!1;return r.listener=t,this.on(e,r),this},s.prototype.removeListener=function(e,t){var r,s,i,a;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],i=r.length,s=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(r)){for(a=i;a-->0;)if(r[a]===t||r[a].listener&&r[a].listener===t){s=a;break}if(0>s)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},s.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},s.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},s.listenerCount=function(e,t){var r;return r=e._events&&e._events[t]?n(e._events[t])?1:e._events[t].length:0}},{}],3:[function(e,t,r){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}]},{},[1])(1)});